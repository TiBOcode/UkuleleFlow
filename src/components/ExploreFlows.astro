---
import { getCollection } from 'astro:content';
import FlowCard from './FlowCard.astro';

const flows = await getCollection('flows');
const sortedFlows = flows.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<section class="explore-flows">
  <div class="container">
    <h2>Explore the Flows</h2>
    <p class="subtitle">Discover creative ukulele journeys through video</p>
    
    <div class="flows-grid">
      {sortedFlows.map(flow => (
        <FlowCard
          title={flow.data.title}
          description={flow.data.description}
          videoId={flow.data.videoId}
          href={`/flows/${flow.slug}`}
        />
      ))}
    </div>
  </div>
</section>

<style>
  .explore-flows {
    padding: 4rem 0;
  }

  h2 {
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 1rem;
    background: var(--orange-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .subtitle {
    text-align: center;
    color: var(--text-secondary);
    font-size: 1.1rem;
    margin-bottom: 3rem;
  }

  .flows-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
  }

  @media (max-width: 768px) {
    .flows-grid {
      grid-template-columns: 1fr;
    }
  }
</style>